{"ast":null,"code":"import { useIsomorphicLayoutEffect } from '@fluentui/react-utilities';\nimport * as React from 'react';\nimport { unstable_NormalPriority as NormalPriority, unstable_runWithPriority as runWithPriority } from 'scheduler';\nconst createProvider = Original => {\n  const Provider = props => {\n    // Holds an actual \"props.value\"\n    const valueRef = React.useRef(props.value); // Used to sync context updates and avoid stale values, can be considered as render/effect counter of Provider.\n\n    const versionRef = React.useRef(0); // A stable object, is used to avoid context updates via mutation of its values.\n\n    const contextValue = React.useRef();\n    if (!contextValue.current) {\n      contextValue.current = {\n        value: valueRef,\n        version: versionRef,\n        listeners: []\n      };\n    }\n    useIsomorphicLayoutEffect(() => {\n      valueRef.current = props.value;\n      versionRef.current += 1;\n      runWithPriority(NormalPriority, () => {\n        contextValue.current.listeners.forEach(listener => {\n          listener([versionRef.current, props.value]);\n        });\n      });\n    }, [props.value]);\n    return /*#__PURE__*/React.createElement(Original, {\n      value: contextValue.current\n    }, props.children);\n  };\n  /* istanbul ignore else */\n\n  if (process.env.NODE_ENV !== 'production') {\n    Provider.displayName = 'ContextSelector.Provider';\n  }\n  return Provider;\n};\n/**\n * @internal\n */\n\nexport const createContext = defaultValue => {\n  // eslint-disable-next-line @fluentui/no-context-default-value\n  const context = /*#__PURE__*/React.createContext({\n    value: {\n      current: defaultValue\n    },\n    version: {\n      current: -1\n    },\n    listeners: []\n  });\n  context.Provider = createProvider(context.Provider); // We don't support Consumer API\n\n  delete context.Consumer;\n  return context;\n};","map":{"version":3,"mappings":"AAAA,SAASA,yBAAT,QAA0C,2BAA1C;AACA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB;AACA,SAASC,uBAAuB,IAAIC,cAApC,EAAoDC,wBAAwB,IAAIC,eAAhF,QAAuG,WAAvG;AAIA,MAAMC,cAAc,GAAWC,QAAR,IAAyD;EAC9E,MAAMC,QAAQ,GAAyCC,KAAK,IAAG;IAC7D;IACA,MAAMC,QAAQ,GAAGT,KAAK,CAACU,MAAN,CAAaF,KAAK,CAACG,KAAnB,CAAjB,CAF6D,CAG7D;;IACA,MAAMC,UAAU,GAAGZ,KAAK,CAACU,MAAN,CAAa,CAAb,CAAnB,CAJ6D,CAM7D;;IACA,MAAMG,YAAY,GAAGb,KAAK,CAACU,MAAN,EAArB;IAEA,IAAI,CAACG,YAAY,CAACC,OAAlB,EAA2B;MACzBD,YAAY,CAACC,OAAb,GAAuB;QACrBH,KAAK,EAAEF,QADc;QAErBM,OAAO,EAAEH,UAFY;QAGrBI,SAAS,EAAE;MAHU,CAAvB;IAKD;IAEDjB,yBAAyB,CAAC,MAAK;MAC7BU,QAAQ,CAACK,OAAT,GAAmBN,KAAK,CAACG,KAAzB;MACAC,UAAU,CAACE,OAAX,IAAsB,CAAtB;MAEAV,eAAe,CAACF,cAAD,EAAiB,MAAK;QAClCW,YAAY,CAACC,OAAb,CAA6CE,SAA7C,CAAuDC,OAAvD,CAA+DC,QAAQ,IAAG;UACzEA,QAAQ,CAAC,CAACN,UAAU,CAACE,OAAZ,EAAqBN,KAAK,CAACG,KAA3B,CAAD,CAAR;QACD,CAFA;MAGF,CAJc,CAAf;IAKD,CATwB,EAStB,CAACH,KAAK,CAACG,KAAP,CATsB,CAAzB;IAWA,oBAAOX,KAAK,CAACmB,aAAN,CAAoBb,QAApB,EAA8B;MAAEK,KAAK,EAAEE,YAAY,CAACC;IAAtB,CAA9B,EAA+DN,KAAK,CAACY,QAArE,CAAP;EACD,CA7BD;EA+BA;;EACA,IAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;IACzChB,QAAQ,CAACiB,WAAT,GAAuB,0BAAvB;EACD;EAED,OAAQjB,QAAR;AACD,CAtCD;AAwCA;;AAEG;;AACH,OAAO,MAAMkB,aAAa,GAAWC,YAAR,IAA+C;EAC1E;EACA,MAAMC,OAAO,gBAAG3B,KAAK,CAACyB,aAAN,CAAyC;IACvDd,KAAK,EAAE;MAAEG,OAAO,EAAEY;IAAX,CADgD;IAEvDX,OAAO,EAAE;MAAED,OAAO,EAAE,CAAC;IAAZ,CAF8C;IAGvDE,SAAS,EAAE;EAH4C,CAAzC,CAAhB;EAMAW,OAAO,CAACpB,QAAR,GAAmBF,cAAc,CAAQsB,OAAO,CAACpB,QAAhB,CAAjC,CAR0E,CAU1E;;EACA,OAASoB,OAAsC,CAACC,QAAhD;EAEA,OAAQD,OAAR;AACD,CAdM","names":["useIsomorphicLayoutEffect","React","unstable_NormalPriority","NormalPriority","unstable_runWithPriority","runWithPriority","createProvider","Original","Provider","props","valueRef","useRef","value","versionRef","contextValue","current","version","listeners","forEach","listener","createElement","children","process","env","NODE_ENV","displayName","createContext","defaultValue","context","Consumer"],"sources":["D:\\teams-app\\qlik2\\Microsoft-Teams-Samples\\samples\\tab-personal-sso-quickstart\\js\\node_modules\\@fluentui\\react-context-selector\\src\\packages\\react-components\\react-context-selector\\src\\createContext.ts"],"sourcesContent":["import { useIsomorphicLayoutEffect } from '@fluentui/react-utilities';\nimport * as React from 'react';\nimport { unstable_NormalPriority as NormalPriority, unstable_runWithPriority as runWithPriority } from 'scheduler';\n\nimport { Context, ContextValue } from './types';\n\nconst createProvider = <Value>(Original: React.Provider<ContextValue<Value>>) => {\n  const Provider: React.FC<React.ProviderProps<Value>> = props => {\n    // Holds an actual \"props.value\"\n    const valueRef = React.useRef(props.value);\n    // Used to sync context updates and avoid stale values, can be considered as render/effect counter of Provider.\n    const versionRef = React.useRef(0);\n\n    // A stable object, is used to avoid context updates via mutation of its values.\n    const contextValue = React.useRef<ContextValue<Value>>();\n\n    if (!contextValue.current) {\n      contextValue.current = {\n        value: valueRef,\n        version: versionRef,\n        listeners: [],\n      };\n    }\n\n    useIsomorphicLayoutEffect(() => {\n      valueRef.current = props.value;\n      versionRef.current += 1;\n\n      runWithPriority(NormalPriority, () => {\n        (contextValue.current as ContextValue<Value>).listeners.forEach(listener => {\n          listener([versionRef.current, props.value]);\n        });\n      });\n    }, [props.value]);\n\n    return React.createElement(Original, { value: contextValue.current }, props.children);\n  };\n\n  /* istanbul ignore else */\n  if (process.env.NODE_ENV !== 'production') {\n    Provider.displayName = 'ContextSelector.Provider';\n  }\n\n  return (Provider as unknown) as React.Provider<ContextValue<Value>>;\n};\n\n/**\n * @internal\n */\nexport const createContext = <Value>(defaultValue: Value): Context<Value> => {\n  // eslint-disable-next-line @fluentui/no-context-default-value\n  const context = React.createContext<ContextValue<Value>>({\n    value: { current: defaultValue },\n    version: { current: -1 },\n    listeners: [],\n  });\n\n  context.Provider = createProvider<Value>(context.Provider);\n\n  // We don't support Consumer API\n  delete ((context as unknown) as Context<Value>).Consumer;\n\n  return (context as unknown) as Context<Value>;\n};\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}