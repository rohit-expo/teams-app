{"ast":null,"code":"/*! @azure/msal-common v13.2.0 2023-07-05 */\n'use strict';\n\nimport { ClientAuthError } from '../error/ClientAuthError.js';\n\n/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\n/**\r\n * @hidden\r\n */\nvar StringUtils = /** @class */function () {\n  function StringUtils() {}\n  /**\r\n   * decode a JWT\r\n   *\r\n   * @param authToken\r\n   */\n  StringUtils.decodeAuthToken = function (authToken) {\n    if (StringUtils.isEmpty(authToken)) {\n      throw ClientAuthError.createTokenNullOrEmptyError(authToken);\n    }\n    var tokenPartsRegex = /^([^\\.\\s]*)\\.([^\\.\\s]+)\\.([^\\.\\s]*)$/;\n    var matches = tokenPartsRegex.exec(authToken);\n    if (!matches || matches.length < 4) {\n      throw ClientAuthError.createTokenParsingError(\"Given token is malformed: \" + JSON.stringify(authToken));\n    }\n    var crackedToken = {\n      header: matches[1],\n      JWSPayload: matches[2],\n      JWSSig: matches[3]\n    };\n    return crackedToken;\n  };\n  /**\r\n   * Check if a string is empty.\r\n   *\r\n   * @param str\r\n   */\n  StringUtils.isEmpty = function (str) {\n    return typeof str === \"undefined\" || !str || 0 === str.length;\n  };\n  /**\r\n   * Check if stringified object is empty\r\n   * @param strObj\r\n   */\n  StringUtils.isEmptyObj = function (strObj) {\n    if (strObj && !StringUtils.isEmpty(strObj)) {\n      try {\n        var obj = JSON.parse(strObj);\n        return Object.keys(obj).length === 0;\n      } catch (e) {}\n    }\n    return true;\n  };\n  StringUtils.startsWith = function (str, search) {\n    return str.indexOf(search) === 0;\n  };\n  StringUtils.endsWith = function (str, search) {\n    return str.length >= search.length && str.lastIndexOf(search) === str.length - search.length;\n  };\n  /**\r\n   * Parses string into an object.\r\n   *\r\n   * @param query\r\n   */\n  StringUtils.queryStringToObject = function (query) {\n    var obj = {};\n    var params = query.split(\"&\");\n    var decode = function (s) {\n      return decodeURIComponent(s.replace(/\\+/g, \" \"));\n    };\n    params.forEach(function (pair) {\n      if (pair.trim()) {\n        var _a = pair.split(/=(.+)/g, 2),\n          key = _a[0],\n          value = _a[1]; // Split on the first occurence of the '=' character\n        if (key && value) {\n          obj[decode(key)] = decode(value);\n        }\n      }\n    });\n    return obj;\n  };\n  /**\r\n   * Trims entries in an array.\r\n   *\r\n   * @param arr\r\n   */\n  StringUtils.trimArrayEntries = function (arr) {\n    return arr.map(function (entry) {\n      return entry.trim();\n    });\n  };\n  /**\r\n   * Removes empty strings from array\r\n   * @param arr\r\n   */\n  StringUtils.removeEmptyStringsFromArray = function (arr) {\n    return arr.filter(function (entry) {\n      return !StringUtils.isEmpty(entry);\n    });\n  };\n  /**\r\n   * Attempts to parse a string into JSON\r\n   * @param str\r\n   */\n  StringUtils.jsonParseHelper = function (str) {\n    try {\n      return JSON.parse(str);\n    } catch (e) {\n      return null;\n    }\n  };\n  /**\r\n   * Tests if a given string matches a given pattern, with support for wildcards and queries.\r\n   * @param pattern Wildcard pattern to string match. Supports \"*\" for wildcards and \"?\" for queries\r\n   * @param input String to match against\r\n   */\n  StringUtils.matchPattern = function (pattern, input) {\n    /**\r\n     * Wildcard support: https://stackoverflow.com/a/3117248/4888559\r\n     * Queries: replaces \"?\" in string with escaped \"\\?\" for regex test\r\n     */\n    var regex = new RegExp(pattern.replace(/\\\\/g, \"\\\\\\\\\").replace(/\\*/g, \"[^ ]*\").replace(/\\?/g, \"\\\\\\?\")); // eslint-disable-line security/detect-non-literal-regexp\n    return regex.test(input);\n  };\n  return StringUtils;\n}();\nexport { StringUtils };","map":{"version":3,"mappings":"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","names":["StringUtils","authToken","isEmpty","ClientAuthError","createTokenNullOrEmptyError","tokenPartsRegex","matches","exec","length","createTokenParsingError","stringify","crackedToken","header","JWSPayload","JWSSig","str","strObj","obj","JSON","parse","Object","keys","e","search","indexOf","lastIndexOf","query","params","split","decode","s","replace","forEach","pair","trim","key","value","_a","arr","map","filter","entry","pattern","input","regex","RegExp","test"],"sources":["D:\\teams-app\\qlik2\\Microsoft-Teams-Samples\\samples\\tab-personal-sso-quickstart\\js\\node_modules\\@azure\\msal-common\\src\\utils\\StringUtils.ts"],"sourcesContent":["/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport { DecodedAuthToken } from \"../account/DecodedAuthToken\";\r\nimport { ClientAuthError } from \"../error/ClientAuthError\";\r\n\r\n/**\r\n * @hidden\r\n */\r\nexport class StringUtils {\r\n\r\n    /**\r\n     * decode a JWT\r\n     *\r\n     * @param authToken\r\n     */\r\n    static decodeAuthToken(authToken: string): DecodedAuthToken {\r\n        if (StringUtils.isEmpty(authToken)) {\r\n            throw ClientAuthError.createTokenNullOrEmptyError(authToken);\r\n        }\r\n        const tokenPartsRegex = /^([^\\.\\s]*)\\.([^\\.\\s]+)\\.([^\\.\\s]*)$/;\r\n        const matches = tokenPartsRegex.exec(authToken);\r\n        if (!matches || matches.length < 4) {\r\n            throw ClientAuthError.createTokenParsingError(`Given token is malformed: ${JSON.stringify(authToken)}`);\r\n        }\r\n        const crackedToken: DecodedAuthToken = {\r\n            header: matches[1],\r\n            JWSPayload: matches[2],\r\n            JWSSig: matches[3]\r\n        };\r\n        return crackedToken;\r\n    }\r\n\r\n    /**\r\n     * Check if a string is empty.\r\n     *\r\n     * @param str\r\n     */\r\n    static isEmpty(str?: string): boolean {\r\n        return (typeof str === \"undefined\" || !str || 0 === str.length);\r\n    }\r\n\r\n    /**\r\n     * Check if stringified object is empty\r\n     * @param strObj \r\n     */\r\n    static isEmptyObj(strObj?: string): boolean {\r\n        if (strObj && !StringUtils.isEmpty(strObj)) {\r\n            try {\r\n                const obj = JSON.parse(strObj);\r\n                return Object.keys(obj).length === 0;\r\n            } catch (e) {}\r\n        }\r\n        return true;\r\n    }\r\n\r\n    static startsWith(str: string, search: string): boolean {\r\n        return str.indexOf(search) === 0;\r\n    }\r\n\r\n    static endsWith(str: string, search: string): boolean {\r\n        return (str.length >= search.length) && (str.lastIndexOf(search) === (str.length - search.length));\r\n    }\r\n\r\n    /**\r\n     * Parses string into an object.\r\n     *\r\n     * @param query\r\n     */\r\n    static queryStringToObject<T>(query: string): T {\r\n        const obj: {} = {};\r\n        const params = query.split(\"&\");\r\n        const decode = (s: string) => decodeURIComponent(s.replace(/\\+/g, \" \"));\r\n        params.forEach((pair) => {\r\n            if (pair.trim()) {\r\n                const [key, value] = pair.split(/=(.+)/g, 2); // Split on the first occurence of the '=' character\r\n                if (key && value) {\r\n                    obj[decode(key)] = decode(value);\r\n                }\r\n            }\r\n        });\r\n        return obj as T;\r\n    }\r\n\r\n    /**\r\n     * Trims entries in an array.\r\n     *\r\n     * @param arr\r\n     */\r\n    static trimArrayEntries(arr: Array<string>): Array<string> {\r\n        return arr.map(entry => entry.trim());\r\n    }\r\n\r\n    /**\r\n     * Removes empty strings from array\r\n     * @param arr\r\n     */\r\n    static removeEmptyStringsFromArray(arr: Array<string>): Array<string> {\r\n        return arr.filter(entry => {\r\n            return !StringUtils.isEmpty(entry);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Attempts to parse a string into JSON\r\n     * @param str\r\n     */\r\n    static jsonParseHelper<T>(str: string): T | null {\r\n        try {\r\n            return JSON.parse(str) as T;\r\n        } catch (e) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Tests if a given string matches a given pattern, with support for wildcards and queries.\r\n     * @param pattern Wildcard pattern to string match. Supports \"*\" for wildcards and \"?\" for queries\r\n     * @param input String to match against\r\n     */\r\n    static matchPattern(pattern: string, input: string): boolean {\r\n        /**\r\n         * Wildcard support: https://stackoverflow.com/a/3117248/4888559\r\n         * Queries: replaces \"?\" in string with escaped \"\\?\" for regex test\r\n         */\r\n        const regex: RegExp = new RegExp(pattern.replace(/\\\\/g, \"\\\\\\\\\").replace(/\\*/g, \"[^ ]*\").replace(/\\?/g, \"\\\\\\?\")); // eslint-disable-line security/detect-non-literal-regexp\r\n\r\n        return regex.test(input);\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}